{% extends 'store/base.html' %}

{% block content %}
<br><br><br><br><br><br><br>
<section class=" product-store position-relative padding-large no-padding-top">
    <div class="container ">
      <div class="row " >
        <div class="swiper product-swiper">
          <div class="swiper-wrapper ">

            <div class="swiper-slide ">
              <div class="product-card position-relative ">
                <div class="image-holder ">
                  <img src="{{products.image.url}}"  class="img-fluid ">
                </div>
                
                <div class="card-detail d-flex justify-content-between align-items-baseline pt-3">
                  <h3 class=" card-title text-uppercase">
                    <a href="#">{{products.title}}</a>
                  </h3>
                  <span class="item-price text-primary">${{products.price}} </span>
                </div>
                <div class="text-center">
                       {{products.descvription}}
                </div>
                <br>
                <div>
                  <a id="{{product.id}}" class="btn max btn-medium btn-black">Ajouter au panier</a>
                </div>
                <br><br><br>
                
              </div>
              
            </div>
            
            <br><br><br><br><br><br>

            
          </div>

          
        </div>

      </div>
    </div>
  
  </section>

{% endblock %}

{% block js %}

    <script type="text/javascript" >
      console.log("tester");
      if (localStorage.getItem('panier')==null){
        var panier={};
      } else {
        panier=JSON.parse(localStorage.getItem('panier'));
      }
      $(document).on('click', '.max', function () {
        console.log("ajouter");
        var item_id=this.id.toString();
        console.log(item_id);
        if(panier[item_id] != undefined) {
          panier[item_id]++;
        } else {
          panier[item_id]=1;
        } 
        console.log(panier);
        localStorage.setItem('panier', JSON.stringify(panier));
        document.getElementById("panier").innerHTML="Panier("+Object.keys(panier).length +")";
        
      } ) 

    </script>

{% endblock %}